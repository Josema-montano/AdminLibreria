using Domain.Entities;
using Domain.Interfaces;
using Infraestructure.Data;
using Microsoft.EntityFrameworkCore;
using System;
using System.Collections.Generic;
using System.Threading.Tasks;

namespace Infraestructure.Repositorios
{
 public class DevolucionRepositorio : IDevolucionRepositorio
 {
 private readonly AppDbContext _context;
 public DevolucionRepositorio(AppDbContext context) { _context = context; }
 public async Task<IEnumerable<Devolucion>> ListarAsync() => await _context.Devoluciones.Include(d=>d.Producto).Include(d=>d.Cliente).AsNoTracking().ToListAsync();
 public async Task<Devolucion?> ObtenerPorIdAsync(Guid id) => await _context.Devoluciones.Include(d=>d.Producto).Include(d=>d.Cliente).FirstOrDefaultAsync(x=>x.Id==id);
 public async Task RegistrarAsync(Devolucion devolucion) { _context.Devoluciones.Add(devolucion); await _context.SaveChangesAsync(); }
 }
}
